#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo
echo "Styling, testing and building project before committing..."
echo

# Prettier check
npm run lint-staged && echo "Formated all staged files." && echo || (
  echo "lint-staged check Failed."
  echo "Run 'npm run lint-staged', add changes and try commit again."
  false
)

# Build check
npm run dist && echo "Distribution creation successful." || (
  echo "Distribution creation failed !!!"
  false
)

# Test
npm test && echo "All tests successful." || (
  echo "test failed !!!"
  false
)

# Documents creation
npm run docs:md && git add ./docs/* ./README.md && echo "Documents updated and added to git staging." || (
  echo "Document creation failed !!!"
  false
)

echo "All checks completed."
echo
